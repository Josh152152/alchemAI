<!doctype html>
<html>
<head>
    <title>Job Summary Agent</title>
</head>
<body>
    <h2>Paste your job ad or describe the job here:</h2>
    <form id="agent-form">
        <textarea name="job_info" rows="12" cols="70"></textarea><br>
        <button type="submit">Generate Job Summary</button>
    </form>
    <h3>AI Agent Output:</h3>
    <pre id="output"></pre>
    <pre id="json-output" style="background:#f8f8f8;padding:8px;border-radius:8px"></pre>
    <script>
        document.getElementById("agent-form").onsubmit = async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const res = await fetch("/generate", {method: "POST", body: formData});
            const data = await res.json();

            // Show the AI's reply as plain text
            document.getElementById("output").textContent = data.reply || "No reply from agent.";

            // If a JSON summary exists, pretty print it below
            if (data.summary) {
                document.getElementById("json-output").textContent = JSON.stringify(data.summary, null, 2);
            } else {
                document.getElementById("json-output").textContent = ""; // clear old
            }
        };
    </script>
</body>
</html>
